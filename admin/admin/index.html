<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard – Piatti 3D</title>
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
<style>
body{font-family:sans-serif;background:#111;color:#eee;margin:0}
header{background:#222;padding:10px;display:flex;justify-content:space-between;align-items:center}
#configPanel{padding:20px}
</style>
</head>
<body>
<header>
  <b>Dashboard – Piatti 3D</b>
  <button onclick="showConfig()">⚙️ Impostazioni</button>
</header>
<div id="app"></div>

<div id="configPanel" style="display:none">
  <h3>Configurazione</h3>
  <label>Repo Owner <input id="cfgOwner"></label><br><br>
  <label>Repo Name <input id="cfgRepo"></label><br><br>
  <label>Branch <input id="cfgBranch" value="main"></label><br><br>
  <label>Token <input id="cfgToken" type="password"></label><br><br>
  <button onclick="saveConfig()">Salva</button>
</div>

<script type="module">
function loadConfig(){
  return {
    owner: localStorage.getItem('repoOwner')||'',
    repo: localStorage.getItem('repoName')||'',
    branch: localStorage.getItem('repoBranch')||'main',
    token: localStorage.getItem('repoToken')||''
  }
}
function showConfig(){
  document.getElementById('configPanel').style.display='block';
  let c=loadConfig();
  document.getElementById('cfgOwner').value=c.owner;
  document.getElementById('cfgRepo').value=c.repo;
  document.getElementById('cfgBranch').value=c.branch;
  document.getElementById('cfgToken').value=c.token;
}
function saveConfig(){
  localStorage.setItem('repoOwner',document.getElementById('cfgOwner').value);
  localStorage.setItem('repoName',document.getElementById('cfgRepo').value);
  localStorage.setItem('repoBranch',document.getElementById('cfgBranch').value);
  localStorage.setItem('repoToken',document.getElementById('cfgToken').value);
  alert('Configurazione salvata! Ricarica la pagina.');
}
let c=loadConfig();
if(!c.owner||!c.repo||!c.token){
  showConfig();
}else{
  document.getElementById('app').innerHTML='<p>Dashboard caricata per '+c.owner+'/'+c.repo+'</p>';
  // qui va integrata la logica di cattura/upload/elenco come nelle versioni precedenti
}
</script>
</body>
</html>
